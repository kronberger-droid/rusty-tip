# Tip Preparation Configuration
# This config uses linear pulse method with adaptive voltage response

[nanonis]
host_ip = "127.0.0.1"
control_ports = [6501, 6502, 6503, 6504]

[data_acquisition]
data_port = 6590
sample_rate = 2000

[experiment_logging]
enabled = true
output_path = "./experiments"

[console]
verbosity = "info"

[tip_prep]
# Frequency shift bounds for determining if tip is sharp (in Hz)
sharp_tip_bounds = [-2.0, 0.0]

# Whether to check for tip stability
check_stability = false

[pulse_method]
# Use linear pulse method
type = "linear"

# Output pulse voltage range (in V)
# This is the Y-axis: minimum and maximum pulse voltages
voltage_bounds = [2.0, 6.0]

# Frequency shift range to monitor (in Hz)
# When freq_shift is outside this range, pulse with max voltage (voltage_bounds[1])
# When inside this range, linearly map freq_shift to pulse voltage
linear_clamp = [-20.0, 0.0]

# Polarity of the pulse voltage: "positive" or "negative"
polarity = "negative"

# Optional: Random polarity switching
# When enabled, every Nth pulse will use the opposite polarity
[pulse_method.random_switch]
switch_every_n_pulses = 10  # Every 10th pulse uses opposite polarity

# Optional: Custom TCP channel mapping
# Uncomment and modify if your Nanonis signal indices differ from the defaults
# Format: { nanonis_index = X, tcp_channel = Y }
[[tcp_channel_mapping]]
nanonis_index = 76  # Frequency shift
tcp_channel = 19
